new modifier_definition magicka_gain_modifier = {
	name = "Magicka Gain Modifier"
	is_percentage = yes
	base_value = 1
}
new script_variable magicka_gain_var = {
	tag = "magicka-monthly"
	name = "Magicka Gain Modifier"
	calculate = {
		&magicka_gain_var &= modifier:magicka_gain_modifier
		
		if [&magicka_gain_var < 0.1] { &magicka_gain_var := 0.1 }
	}
}

new script_variable monthly_magicka_from_ruler = {
	tag = "magicka-monthly"
	name = "Monthly Magicka from Ruler"
	calculate = {
		&monthly_magicka_from_ruler &= ADM
		&monthly_magicka_from_ruler &= DIP
		&monthly_magicka_from_ruler &= MIL
		
		&monthly_magicka_from_ruler *= 0.05
	}
}
new modifier_definition monthly_magicka = {
	name = "Monthly Magicka"
	is_percentage = no
	base_value = 1
}
new script_variable monthly_magicka_from_modifier = {
	tag = "magicka-monthly"
	name = "Monthly Magicka from Modifiers"
	calculate = {
		&monthly_magicka_from_modifier &= modifier:monthly_magicka
	}
}

new script_variable monthly_magicka_var = {
	tag = "magicka-monthly"
	name = "Monthly Magicka"
	calculate = {
		&monthly_magicka_var := monthly_magicka_from_ruler
		&monthly_magicka_var += monthly_magicka_from_modifier
		
		&monthly_magicka_var *= magicka_gain_var
	}
}

new modifier_definition max_magicka_modifier = {
	name = "Max Gain Modifier"
	is_percentage = yes
	base_value = 1
}
new script_variable max_magicka_modifier_var = {
	tag = "magicka-monthly"
	name = "Max Magicka Modifier"
	calculate = {
		&max_magicka_modifier_var &= modifier:max_magicka_modifier
		
		if [&max_magicka_modifier_var < 0.1] { &max_magicka_modifier_var := 0.1 }
	}
}

new script_variable max_magicka_from_development = {
	tag = "magicka-monthly"
	name = "Max Magicka from Development"
	calculate = {
		&max_magicka_from_development &= total_development
	}
}
new modifier_definition max_magicka = {
	name = "Max Magicka"
	is_percentage = no
	base_value = 100
}
new script_variable max_magicka_from_modifier = {
	tag = "magicka-monthly"
	name = "Max Magicka from Modifiers"
	calculate = {
		&max_magicka_from_modifier &= modifier:max_magicka
	}
}

new script_variable max_magicka_var = {
	tag = "magicka-monthly"
	name = "Max Magicka"
	calculate = {
		&max_magicka_var := max_magicka_from_modifier
		&max_magicka_var += max_magicka_from_development
		
		&max_magicka_var *= max_magicka_modifier_var
	}
}

new script_variable magicka = {
	tag = "magicka-monthly"
	name = "Magicka"
	calculate = {
		&magicka += monthly_magicka_var
		
		if [&magicka > max_magicka_var] {
			&magicka := max_magicka_var
		}
	}
}




