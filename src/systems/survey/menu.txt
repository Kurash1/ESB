new custom_icon custom_mechanic_survey_background = {
	potential = {
		has_country_flag = show_survey_screen
	}
}
new custom_button open_survey_screen = {
	tooltip = "Open Survey Screen"
	potential = {
		NOT = {
			has_country_flag = show_technology
		}
	}
	effect = {
		set_country_flag = show_survey_screen
		
		if [
			NOT = {
				has_country_flag = init_survey
			}
		] {
			set_country_flag = init_survey
			
			set_variable = {
				which = survey_funds
				value = 0
			}
			set_variable = {
				which = survey_manpower
				value = 0
			}
			set_variable = {
				which = survey_funds_income
				value = 0
			}
			set_variable = {
				which = survey_funds_expenses
				value = 0
			}
			set_variable = {
				which = survey_funds_sum
				value = 0
			}
			set_variable = {
				which = survey_manpower_recruits
				value = 0
			}
			set_variable = {
				which = survey_manpower_losses
				value = 0
			}
			set_variable = {
				which = survey_manpower_sum
				value = 0
			}
		}
	}
}
new custom_button close_survey_screen = {
	tooltip = "Close Survey Screen"
	potential = {
		has_country_flag = show_survey_screen
	}
	effect = {
		clr_country_flag = show_survey_screen
	}
}
on_actions:on_monthly_pulse += {
	if [has_country_flag = init_survey] {
		survey_calculate_income
		survey_calculate_expenses
		survey_calculate_fund_sum
		
		
		
		
	}
}