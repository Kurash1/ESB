new localisation expedition_progress = "Expedition Progress"
new effect cause_expedition_progress = {
	args = int
	transpile = {
		change_variable = {
			which = expedition_progress
			value = args
		}
		hidden_effect = {
			set_variable = {
				which = expedition_percentage
				which = expedition_progress
			}
			divide_variable = {
				which = expedition_percentage
				which = expedition_length
			}
			multiply_variable = {
				which = expedition_percentage
				value = 100
			}
			
			if [
				check_variable = {
					which = expedition_progress
					which = expedition_length
				}
			] {
				end_expedition_effect
			}
		}
	}
}
new named_effect expedition_progress_pulse = {
	random_list = {
		1 = {
			modifier = {
				factor = 1.5
				has_province_modifier = expedition_mod_cash_mod
			}
			modifier = {
				factor = 1.5
				has_province_modifier = expedition_mod_camp_mod
			}
			modifier = {
				factor = 2.5
				has_province_modifier = expedition_mod_explore_mod
			}
			modifier = {
				factor = 1.5
				has_province_modifier = expedition_mod_merc_mod
			}
			modifier = {
				factor = 2
				full_idea_group = exploration_ideas
			}
			cause_expedition_progress = 1
		}
		19 = { }
	}
}
on_actions:on_monthly_pulse += {
	every_owned_province [
		has_province_modifier = expedition_camp
	] {
		expedition_progress_pulse
	}
}