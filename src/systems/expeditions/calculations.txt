new localisation expedition_progress = "Expedition Progress"
new effect cause_expedition_progress = {
	args = float
	transpile = {
		change_variable = {
			which = expedition_progress
			value = args
		}
	}
}
new named_effect reload_expedition_progress = {
	hidden_effect = {
		set_variable = {
			which = expedition_percentage
			which = expedition_progress
		}
		divide_variable = {
			which = expedition_percentage
			which = expedition_length
		}
		multiply_variable = {
			which = expedition_percentage
			value = 100
		}
		
		if [
			check_variable = {
				which = expedition_progress
				which = expedition_length
			}
		] {
			end_expedition_effect
		}
	}
}
new named_effect expedition_progress_pulse = {
	
}
on_actions:on_monthly_pulse += {
	every_owned_province [
		has_province_modifier = expedition_camp
	] {
		expedition_progress_pulse
		
		reload_expedition_progress
	}
}