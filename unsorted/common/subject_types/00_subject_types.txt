# OBS! Full modding not supported. Code support still needed to remove/rename the original subject types.
# Custom ones CAN be created with scriptable diplomatic actions (see "dummy" at the bottom of this file), although this is not currently very functional.

# If used, copy_from should be put at the very top ( things above it will be overwitten )

# Triggers will be evaluated in the scope of the Subject, with the Overlord as its FROM scope.
# Exception: is_potential_overlord is evaluated in the scope of the potential Overlord, with no particular subject in mind.

# count = x is used (means it "counts as" x in some triggers).

# copy_from copies everything except count and is_potential_overlord

# relative_power_class decides how Subjects are grouped together when considering relative strenghth towards overlord:
# If it is 0 they won't consider relative power and if it is 1 they will only consider their own power (and those supporting their independence) compared to their Overlord's.
# Otherwise they will sum up the power of every Subject of the same relative_power_class as themselves, and all countries who support either themselves or one of their allies in the same relative_power_class.

# diplomacy_view_class decides how subjects are grouped together in diplomacy view and in foreign province view:
# 0 means it won't be listed
# 1 means it will be listed together only with the same subject type
# Other values means it will be listed together with all subjects of the same diplomacy_view_class

# The following status checks are considered in old triggers:

# is_colonial_nation  & is_former_colonial_nation
#        checks the 'has_colonial_parent = yes' attribute

# is_lesser_in_union, junior_union_with, senior_union_with & years_in_union_under
#		checks the 'has_overlords_ruler = yes' attribute


# Forward declaring all subject types so they can refer to each other in triggers etc.

# Audax Validator "!" Ignore_1006

markarth_clan = {
	copy_from = vassal
	
	counts_for_borders = yes
	relative_power_class = 1
	place_relative_on_throne = no
}

imperial_vassal = {
	copy_from = vassal
	
	relative_power_class = 1
}

imperial_subject = {
	copy_from = default
	
	# Graphics:
	sprite = GFX_court_union
	diplomacy_overlord_sprite = GFX_in_state_icon
	diplomacy_subject_sprite = GFX_icon_states

	# Properties:
    is_voluntary = yes
	can_have_subjects_of_other_types = yes
	takes_diplo_slot = no
	overlord_protects_external = yes
	gives_daimyo_bonuses = yes
	gets_help_with_rebels = yes
	allows_taking_land_without_independence = yes
	
	base_liberty_desire = -25.0
	liberty_desire_negative_prestige = 1.0
	liberty_desire_same_dynasty = -25.0
	
	pays_overlord = 0.35
	forcelimit_to_overlord = 0.0
	military_focus = 1.0
	
	relative_power_class = 2
	diplomacy_view_class = 1
	
	can_fight = {
	    independent_nations = yes
		same_overlord = vassal
		same_overlord = client_vassal
		same_overlord = imperial_subject
		same_overlord = holy_order_1
	}
	can_rival = {
	    independent_nations = yes
		same_overlord = vassal
		same_overlord = client_vassal
		same_overlord = imperial_subject
		same_overlord = holy_order_1
	}
	can_ally = {
	    independent_nations = yes
		same_overlord = vassal
		same_overlord = client_vassal
		same_overlord = imperial_subject
		same_overlord = holy_order_1
	}
	can_marry = {
		same_overlord = all
		independent_nations = yes
	}
	
    # Subject Interactions:
	# (continuous)
	support_loyalists = yes
	subsidize_armies = yes
	scutage = yes
	send_officers = yes
	# (immediate)
	knowledge_sharing = yes
	takeondebt = yes
	siphon_income = yes
	send_additional_troops = yes
	return_land = yes
	conscript_general = yes	
	
	block_settlement_growth = yes
	allow_settlement_growth = yes

	# Modifiers:
	modifier_subject = {
		modifier = imperial_nation
	}
	modifier_overlord = {
		modifier = imperial_subject
	}

	overlord_opinion_modifier = in_union
	subject_opinion_modifier = in_union
}

colony = {
	copy_from = default
	
	#Graphics:
	sprite = GFX_subject_colony_icon
	diplomacy_overlord_sprite = GFX_diplomacy_leadcolony
	diplomacy_subject_sprite = GFX_diplomacy_subjectcolony

	#Properties:
    is_voluntary = yes
	transfer_trade_power = yes
	transfer_trade_if_merchant_republic = yes
	can_release_and_play = yes
	uses_tariffs = yes
	dynamically_created_during_history = yes
	eats_overlords_colonies = yes
	has_colonial_parent = yes
	overlord_can_be_subject = yes
	can_have_subjects_of_other_types = yes
	takes_diplo_slot = no
	overlord_protects_external = yes
	overlord_enforce_peace_attacking = yes
	gets_help_with_rebels = yes
	allows_taking_land_without_independence = yes
	extend_trading_range = yes
	
	liberty_desire_negative_prestige = 1.0
	
	cities_required_for_bonuses = 25
	
	pays_overlord = 0.25
	forcelimit_to_overlord = 0.0
	military_focus = 1.0
	
	relative_power_class = 2
	diplomacy_view_class = 1
	
	can_fight = {
	    same_overlord = colony
		other_overlord = colony
		same_overlord = native_reservation
		other_overlord = native_reservation
		neighboring_primitives = yes
		colonial_region_nations = yes
	}
	can_rival = {
		same_overlord = colony
		other_overlord = colony
		same_overlord = native_reservation
		other_overlord = native_reservation
		neighboring_primitives = yes
		colonial_region_nations = yes
	}
	can_ally = {
		same_overlord = colony
		other_overlord = colony
		same_overlord = native_reservation
		other_overlord = native_reservation
		neighboring_primitives = yes
	}
	
    #Subject Interactions:
	# (continuous)
	support_loyalists = yes
	divert_trade = yes
	# (immediate)
	customize_subject = yes
	replace_governor = yes

	start_colonial_war = yes
	increase_tariffs = yes
	decrease_tariffs = yes

	takeondebt = yes

	block_settlement_growth = yes
	allow_settlement_growth = yes

	#Modifiers:
	modifier_subject = {
		modifier = colony_nation
	}
	modifier_overlord = {
		modifier = large_colonial_nation
		trigger = {
			num_of_cities = 35
		}
	}

	overlord_opinion_modifier = colonial_relation
	subject_opinion_modifier = colonial_relation
}

crown_colony = {
	copy_from = colony

	change_colonial_type = yes
	upgrade_subject_type = yes
	is_colony_subtype = yes
	can_send_missionary_to_subject = yes	
	extend_trading_range = yes
	
	cities_required_for_bonuses = 25
	
	base_liberty_desire = -15.0
	liberty_desire_development_ratio = -0.15
	
	pays_overlord = 0.25
	forcelimit_to_overlord = 0.0
	military_focus = 1.0

	# Subject Interactions:
	# (continuous)
	support_loyalists = no
	divert_trade = yes
	# (immediate)
	customize_subject = yes
	replace_governor = yes

	start_colonial_war = yes
	increase_tariffs = yes
	decrease_tariffs = yes
	
	enforce_religion = yes
	takeondebt = yes
	
	block_settlement_growth = yes
	allow_settlement_growth = yes
	
	#Modifiers:
	modifier_subject = {
		modifier = crown_colony_subject
	}
	modifier_overlord = {
		modifier = crown_colony_overlord
	}
}

private_enterprise = {
	copy_from = colony

	change_colonial_type = yes
	upgrade_subject_type = yes
	is_colony_subtype = yes
	extend_trading_range = yes
	
	cities_required_for_bonuses = 25
	
	base_liberty_desire = -25.0
	liberty_desire_development_ratio = -0.25

	pays_overlord = 0.50
	forcelimit_to_overlord = 0.0
	military_focus = 1.0

	# Subject Interactions:
	# (continuous)
	support_loyalists = no
	placate_rulers = yes
	embargo_rivals = yes
	divert_trade = no
	# (immediate)
	customize_subject = no
	siphon_income = yes
	replace_governor = no
	
	start_colonial_war = no
	
	send_additional_troops = yes

	increase_tariffs = yes
	decrease_tariffs = yes
	
	press_sailors = yes
	takeondebt = yes
	
	block_settlement_growth = yes
	allow_settlement_growth = yes
	
	#Modifiers:
	modifier_subject = {
		modifier = private_enterprise_subject
	}
	modifier_overlord = {
		modifier = private_enterprise_overlord
	}
}

self_governing_colony = {
	copy_from = colony

	change_colonial_type = yes
	upgrade_subject_type = yes
	is_colony_subtype = yes
	extend_trading_range = yes
	
	cities_required_for_bonuses = 25
	
	base_liberty_desire = -35.0
	liberty_desire_development_ratio = -0.35

	pays_overlord = 0.10
	forcelimit_to_overlord = 0.0
	military_focus = 1.0

	# Subject Interactions:
	# (continuous)
	support_loyalists = yes
	divert_trade = no
	# (immediate)
	customize_subject = no
	send_officers = yes
	replace_governor = no

	subsidize_armies = yes
	conscript_general = yes	
	
	start_colonial_war = no
	
	increase_tariffs = yes
	decrease_tariffs = yes
	
	return_land = yes
	
	takeondebt = yes
	
	block_settlement_growth = yes
	allow_settlement_growth = yes
	
	#Modifiers:
	modifier_subject = {
		modifier = self_governing_colony_subject
	}
	modifier_overlord = {
		modifier = self_governing_colony_overlord
	}
}

native_reservation = {
	copy_from = default
	
	# Graphics:
	sprite = GFX_icon_federation
	diplomacy_overlord_sprite = GFX_diplomacy_leadprotectorates
	diplomacy_subject_sprite = GFX_diplomacy_inprotectorate
	
	# Properties:
    is_voluntary = yes
	transfer_trade_power = yes
	transfer_trade_if_merchant_republic = yes
	joins_overlords_wars = no
	can_be_integrated = yes
	uses_tariffs = yes
	overlord_can_be_subject = yes
	can_have_subjects_of_other_types = yes
	takes_diplo_slot = no
	overlord_protects_external = yes
	overlord_enforce_peace_attacking = yes
	gets_help_with_rebels = yes
	allows_taking_land_without_independence = yes
	extend_trading_range = yes
	
	base_liberty_desire = 5.0
	liberty_desire_negative_prestige = 1.0
	liberty_desire_development_ratio = 0.25
	liberty_desire_same_dynasty = -5.0
	
	cities_required_for_bonuses = 5
	
	pays_overlord = 0.5
	forcelimit_to_overlord = 0.0
	military_focus = 1.0
	
	relative_power_class = 2
	diplomacy_view_class = 1
	
	can_fight = {
	    same_overlord = colony
		other_overlord = colony
		same_overlord = native_reservation
		other_overlord = native_reservation
		neighboring_primitives = yes
		colonial_region_nations = yes
	}
	can_rival = {
		same_overlord = colony
		other_overlord = colony
		same_overlord = native_reservation
		other_overlord = native_reservation
		neighboring_primitives = yes
		colonial_region_nations = yes
	}
	can_ally = {
		same_overlord = colony
		other_overlord = colony
		same_overlord = native_reservation
		other_overlord = native_reservation
		neighboring_primitives = yes
	}
	can_marry = {
		independent_nations = yes
		same_overlord = all
		other_overlord = all
	}
	
    # Subject Interactions:
	# (continuous)
	divert_trade = yes
	# (immediate)
	placate_rulers = yes
	siphon_income = yes
	increase_tariffs = yes
	decrease_tariffs = yes
	send_additional_troops = yes
	demand_artifacts = yes
	conscript_general = yes	
	takeondebt = yes
	knowledge_sharing = yes
	
	block_settlement_growth = yes
	allow_settlement_growth = yes
	
	# Modifiers:
	modifier_subject = {
		modifier = reservation_nation
	}
	modifier_overlord = {
		modifier = reservation_subject
		trigger = {
			num_of_cities = 10
		}
	}
	
	overlord_opinion_modifier = colonial_relation
	subject_opinion_modifier = colonial_relation
}

tributary_state = {
	#If similar subject added check if it needs to be added to these scripted triggers:
	#is_subject_except_tributary_trigger
	#is_free_or_tributary_trigger
	copy_from = default

	# Triggers:
	is_potential_overlord = {
		has_dlc = "Mandate of Heaven"
		NOT = { 
			is_subject_of_type = tributary_state
		}
		OR = {
		    #is_emperor = yes
			is_emperor_of_china = yes
			has_reform = celestial_empire
			#is_nomad = yes
		}
	}
	
	# Graphics:
	sprite = GFX_subject_tributary_state
	diplomacy_overlord_sprite = GFX_diplomacy_leadtributary
	diplomacy_subject_sprite = GFX_diplomacy_amtributary

	# Properties:
    is_voluntary = yes
    can_send_tribute = yes
	joins_overlords_wars = no
	overlord_can_be_subject = yes
	can_have_subjects_of_other_types = yes
	takes_diplo_slot = no
	overlord_protects_external = yes
	gets_help_with_rebels = yes
	allows_taking_land_without_independence = yes
	
	base_liberty_desire = 10.0
	liberty_desire_negative_prestige = 1.0
	liberty_desire_development_ratio = 0.15
	liberty_desire_same_dynasty = -10.0
	
	pays_overlord = 0.15
	forcelimit_to_overlord = 0.0
	military_focus = 1.0
	
	relative_power_class = 1
	diplomacy_view_class = 1
	
	can_fight = {
		independent_nations = yes
		same_overlord = tributary_state
		other_overlord = all
	}
	can_rival = {
		independent_nations = yes
		same_overlord = tributary_state
		other_overlord = all
	}
	can_ally = {
		independent_nations = yes
		same_overlord = tributary_state
		other_overlord = all
	}
	can_marry = {
		independent_nations = yes
		same_overlord = all
		other_overlord = all
	}

    # Subject Interactions:
	# (continuous)
	embargo_rivals = yes
	subsidize_armies = yes
	# (immediate)
	siphon_income = yes
	seize_territory = yes
	bestow_gifts = yes
	send_additional_troops = yes
	demand_artifacts = yes
	demand_additional_tribute = yes
	return_land = yes
	takeondebt = yes
	
	block_settlement_growth = yes
	allow_settlement_growth = yes

	# Modifiers:
	modifier_subject = clear # Tributaries don't get the ordinary subject_nation penalty 
	modifier_subject = {
		modifier = tributary_state_behind_overlord_tech_adm
		trigger = {
			ROOT = {
				NOT = { adm_tech = FROM }
			}
		}
	}
	modifier_subject = {
		modifier = tributary_state_behind_overlord_tech_dip
		trigger = {
			ROOT = {
				NOT = { dip_tech = FROM }
			}
		}
	}
	modifier_subject = {
		modifier = tributary_state_behind_overlord_tech_mil
		trigger = {
			ROOT = {
				NOT = { mil_tech = FROM }
			}
		}
	}
	modifier_overlord = {
		modifier = tributary_subject
		trigger = {
			num_of_cities = 50
		}
	}
}

alliance_member = {
	copy_from = default
	
	# Graphics:
	sprite = GFX_icon_federation
	diplomacy_overlord_sprite = GFX_ticking_war_score_icon
	diplomacy_subject_sprite = GFX_ironman_icon1
	
	# Properties:
    is_voluntary = yes
	can_have_subjects_of_other_types = yes
	takes_diplo_slot = no
	overlord_protects_external = yes
	gets_help_with_rebels = yes
	allows_taking_land_without_independence = yes
	
	base_liberty_desire = 15.0
	liberty_desire_negative_prestige = 1.0
	liberty_desire_development_ratio = 0.10
	liberty_desire_same_dynasty = -15.0
	
	pays_overlord = 0.10
	forcelimit_to_overlord = 0.10
	military_focus = 1.0
	
	relative_power_class = 2
	diplomacy_view_class = 1
	
	can_fight = {
		independent_nations = yes
		other_overlord = all
	}
	can_rival = {
		independent_nations = yes
		other_overlord = all
	}
	can_ally = {
		independent_nations = yes
		same_overlord = alliance_member
		other_overlord = all
	}
	can_marry = {
		independent_nations = yes
		same_overlord = all
		other_overlord = all
	}
	
    # Subject Interactions:
	# (continuous)
	subsidize_armies = yes
	scutage = yes
	send_officers = yes
	placate_rulers = yes
	# (immediate)
	siphon_income = yes
	bestow_gifts = yes
	fortify_march = yes
	send_additional_troops = yes
	return_land = yes
	takeondebt = yes
	
	block_settlement_growth = yes
	allow_settlement_growth = yes
	
	# Modifiers:
	modifier_subject = {
		modifier = alliance_nation
	}
	modifier_overlord = {
		modifier = alliance_subject
	}
}

#######################################################################

daimyo_vassal = {
	copy_from = vassal
	count = vassal
	
	# Graphics:
	sprite = GFX_icon_vassal
	diplomacy_overlord_sprite = GFX_diplomacy_leadvassal
	diplomacy_subject_sprite = GFX_diplomacy_amvassal
}

client_vassal = {
	copy_from = vassal
	count = vassal
	
	# Graphics:
	diplomacy_overlord_sprite = GFX_diplomacy_leadclients
	diplomacy_subject_sprite = GFX_diplomacy_areclients

	# Properties:
	created_by_overlord = yes
	liberty_desire_revolution = 0

	# Subject Interactions:
	customize_subject = yes
	return_land = no
}

client_march = {
	copy_from = march
	count = march

	# Graphics:
	diplomacy_overlord_sprite = GFX_diplomacy_leadclients
	diplomacy_subject_sprite = GFX_diplomacy_areclients

	# Properties:
	created_by_overlord = yes
	liberty_desire_revolution = 0

	# Subject Interactions:
	customize_subject = yes
	enforce_religion = no
}

# Completely scripted subject type (no code used). Add any number of these. Check common/new_diplomatic_actions for how to make visible in game.
dummy =
{
	copy_from = default
}