estate_priests_befriend_rival_of_rival = {
	can_select = {
		any_rival_country = {
			any_rival_country = {
				NOT = { tag = root }
				root = { knows_country = prev }
				NOT = { is_rival = root }
				NOT = { ROOT = { is_rival = prev } }
				NOT = { alliance_with = root }
				has_opinion = {
					who = root
					value = -50
				}
				NOT = {
					has_opinion = {
						who = root
						value = 50
					}
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_rival_country = {
			limit = {
				any_rival_country = {
					NOT = { tag = root }
					root = { knows_country = prev }
					NOT = { is_rival = root }
					NOT = { ROOT = { is_rival = prev } }
					NOT = { alliance_with = root }
					has_opinion = {
						who = root
						value = -50
					}
					NOT = {
						has_opinion = {
							who = root
							value = 50
						}
					}
				}
			}
			save_event_target_as = rival_country
			random_rival_country = {
				limit = {
					NOT = { tag = root }
					root = { knows_country = prev }
					NOT = { is_rival = root }
					NOT = { ROOT = { is_rival = prev } }
					NOT = { alliance_with = root }
					has_opinion = {
						who = root
						value = -50
					}
					NOT = {
						has_opinion = {
							who = root
							value = 50
						}
					}
				}
				save_event_target_as = agenda_country
			}
		}
	}
	fail_if = {
		event_target:agenda_country = {
			OR = {
				NOT = { num_of_cities = 1 }
				war_with = root
				NOT = { has_opinion = { who = root value = -100 } }
			}
		}
	}
	provinces_to_highlight = {
		is_capital_of = event_target:agenda_country
	}
	task_requirements = {
		event_target:agenda_country = {
			has_opinion = {
				who = root
				value = 100
			}
		}
	}
	task_completed_effect = {
		add_dip_power = 50
		add_estate_loyalty = {
			estate = estate_priests
			loyalty = 10
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_priests
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_mages_befriend_rival_of_rival = {
	can_select = {
		any_rival_country = {
			any_rival_country = {
				NOT = { tag = root }
				root = { knows_country = prev }
				NOT = { is_rival = root }
				NOT = { ROOT = { is_rival = prev } }
				NOT = { alliance_with = root }
				has_opinion = {
					who = root
					value = -50
				}
				NOT = {
					has_opinion = {
						who = root
						value = 50
					}
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_rival_country = {
			limit = {
				any_rival_country = {
					NOT = { tag = root }
					root = { knows_country = prev }
					NOT = { is_rival = root }
					NOT = { ROOT = { is_rival = prev } }
					NOT = { alliance_with = root }
					has_opinion = {
						who = root
						value = -50
					}
					NOT = {
						has_opinion = {
							who = root
							value = 50
						}
					}
				}
			}
			save_event_target_as = rival_country
			random_rival_country = {
				limit = {
					NOT = { tag = root }
					root = { knows_country = prev }
					NOT = { is_rival = root }
					NOT = { ROOT = { is_rival = prev } }
					NOT = { alliance_with = root }
					has_opinion = {
						who = root
						value = -50
					}
					NOT = {
						has_opinion = {
							who = root
							value = 50
						}
					}
				}
				save_event_target_as = agenda_country
			}
		}
	}
	fail_if = {
		event_target:agenda_country = {
			OR = {
				NOT = { num_of_cities = 1 }
				war_with = root
				NOT = { has_opinion = { who = root value = -100 } }
			}
		}
	}
	provinces_to_highlight = {
		is_capital_of = event_target:agenda_country
	}
	task_requirements = {
		event_target:agenda_country = {
			has_opinion = {
				who = root
				value = 100
			}
		}
	}
	task_completed_effect = {
		add_dip_power = 50
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 10
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_mages
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_merchants_befriend_rival_of_rival = {
	can_select = {
		any_rival_country = {
			any_rival_country = {
				NOT = { tag = root }
				root = { knows_country = prev }
				NOT = { is_rival = root }
				NOT = { ROOT = { is_rival = prev } }
				NOT = { alliance_with = root }
				has_opinion = {
					who = root
					value = -50
				}
				NOT = {
					has_opinion = {
						who = root
						value = 50
					}
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_rival_country = {
			limit = {
				any_rival_country = {
					NOT = { tag = root }
					root = { knows_country = prev }
					NOT = { is_rival = root }
					NOT = { ROOT = { is_rival = prev } }
					NOT = { alliance_with = root }
					has_opinion = {
						who = root
						value = -50
					}
					NOT = {
						has_opinion = {
							who = root
							value = 50
						}
					}
				}
			}
			save_event_target_as = rival_country
			random_rival_country = {
				limit = {
					NOT = { tag = root }
					root = { knows_country = prev }
					NOT = { is_rival = root }
					NOT = { ROOT = { is_rival = prev } }
					NOT = { alliance_with = root }
					has_opinion = {
						who = root
						value = -50
					}
					NOT = {
						has_opinion = {
							who = root
							value = 50
						}
					}
				}
				save_event_target_as = agenda_country
			}
		}
	}
	fail_if = {
		event_target:agenda_country = {
			OR = {
				NOT = { num_of_cities = 1 }
				war_with = root
				NOT = { has_opinion = { who = root value = -100 } }
			}
		}
	}
	provinces_to_highlight = {
		is_capital_of = event_target:agenda_country
	}
	task_requirements = {
		event_target:agenda_country = {
			has_opinion = {
				who = root
				value = 100
			}
		}
	}
	task_completed_effect = {
		add_dip_power = 50
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_slavers_befriend_rival_of_rival = {
	can_select = {
		any_rival_country = {
			any_rival_country = {
				NOT = { tag = root }
				root = { knows_country = prev }
				NOT = { is_rival = root }
				NOT = { ROOT = { is_rival = prev } }
				NOT = { alliance_with = root }
				has_opinion = {
					who = root
					value = -50
				}
				NOT = {
					has_opinion = {
						who = root
						value = 50
					}
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_rival_country = {
			limit = {
				any_rival_country = {
					NOT = { tag = root }
					root = { knows_country = prev }
					NOT = { is_rival = root }
					NOT = { ROOT = { is_rival = prev } }
					NOT = { alliance_with = root }
					has_opinion = {
						who = root
						value = -50
					}
					NOT = {
						has_opinion = {
							who = root
							value = 50
						}
					}
				}
			}
			save_event_target_as = rival_country
			random_rival_country = {
				limit = {
					NOT = { tag = root }
					root = { knows_country = prev }
					NOT = { is_rival = root }
					NOT = { ROOT = { is_rival = prev } }
					NOT = { alliance_with = root }
					has_opinion = {
						who = root
						value = -50
					}
					NOT = {
						has_opinion = {
							who = root
							value = 50
						}
					}
				}
				save_event_target_as = agenda_country
			}
		}
	}
	fail_if = {
		event_target:agenda_country = {
			OR = {
				NOT = { num_of_cities = 1 }
				war_with = root
				NOT = { has_opinion = { who = root value = -100 } }
			}
		}
	}
	provinces_to_highlight = {
		is_capital_of = event_target:agenda_country
	}
	task_requirements = {
		event_target:agenda_country = {
			has_opinion = {
				who = root
				value = 100
			}
		}
	}
	task_completed_effect = {
		add_dip_power = 50
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_nobility_befriend_rival_of_rival = {
	can_select = {
		any_rival_country = {
			any_rival_country = {
				NOT = { tag = root }
				root = { knows_country = prev }
				NOT = { is_rival = root }
				NOT = { ROOT = { is_rival = prev } }
				NOT = { alliance_with = root }
				has_opinion = {
					who = root
					value = -50
				}
				NOT = {
					has_opinion = {
						who = root
						value = 50
					}
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_rival_country = {
			limit = {
				any_rival_country = {
					NOT = { tag = root }
					root = { knows_country = prev }
					NOT = { is_rival = root }
					NOT = { ROOT = { is_rival = prev } }
					NOT = { alliance_with = root }
					has_opinion = {
						who = root
						value = -50
					}
					NOT = {
						has_opinion = {
							who = root
							value = 50
						}
					}
				}
			}
			save_event_target_as = rival_country
			random_rival_country = {
				limit = {
					NOT = { tag = root }
					root = { knows_country = prev }
					NOT = { is_rival = root }
					NOT = { ROOT = { is_rival = prev } }
					NOT = { alliance_with = root }
					has_opinion = {
						who = root
						value = -50
					}
					NOT = {
						has_opinion = {
							who = root
							value = 50
						}
					}
				}
				save_event_target_as = agenda_country
			}
		}
	}
	fail_if = {
		event_target:agenda_country = {
			OR = {
				NOT = { num_of_cities = 1 }
				war_with = root
				NOT = { has_opinion = { who = root value = -100 } }
			}
		}
	}
	provinces_to_highlight = {
		is_capital_of = event_target:agenda_country
	}
	task_requirements = {
		event_target:agenda_country = {
			has_opinion = {
				who = root
				value = 100
			}
		}
	}
	task_completed_effect = {
		add_dip_power = 50
		add_estate_loyalty = {
			estate = estate_nobility
			loyalty = 10
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_nobility
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#######################################################################

estate_merchants_expand_trade_company = {
	can_select = {
		num_of_ports = 1
		any_owned_province = {
			is_owned_by_trade_company = yes
			NOT = { trade_company_size = 10 }
		}
	}
	selection_weight = {
		factor = 1.0
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_owned_by_trade_company = yes
				NOT = { trade_company_size = 10 }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		trade_company_region = event_target:agenda_province
	}
	task_requirements = {
		event_target:agenda_province = {
			trade_company_size = 10
		}
	}
	task_completed_effect = {
		add_years_of_income = 1.0
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 15
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_slavers_expand_trade_company = {
	can_select = {
		num_of_ports = 1
		any_owned_province = {
			is_owned_by_trade_company = yes
			NOT = { trade_company_size = 10 }
		}
	}
	selection_weight = {
		factor = 1.0
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_owned_by_trade_company = yes
				NOT = { trade_company_size = 10 }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		trade_company_region = event_target:agenda_province
	}
	task_requirements = {
		event_target:agenda_province = {
			trade_company_size = 10
		}
	}
	task_completed_effect = {
		add_years_of_income = 1.0
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 15
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#######################################################################

estate_merchants_pay_off_loans = {
	can_select = {
		num_of_loans = 5
		is_bankrupt = no
	}
	selection_weight = {
		factor = 1
	}
	fail_if = {
		is_bankrupt = yes
	}
	task_requirements = {
		NOT = { num_of_loans = 1 }
		hidden_trigger = {
			is_bankrupt = no
		}
	}
    task_completed_effect = {
		add_prestige = 5
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_slavers_pay_off_loans = {
	can_select = {
		num_of_loans = 5
		is_bankrupt = no
	}
	selection_weight = {
		factor = 1
	}
	fail_if = {
		is_bankrupt = yes
	}
	task_requirements = {
		NOT = { num_of_loans = 1 }
		hidden_trigger = {
			is_bankrupt = no
		}
	}
    task_completed_effect = {
		add_prestige = 5
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_commoners_pay_off_loans = {
	can_select = {
		num_of_loans = 5
		is_bankrupt = no
	}
	selection_weight = {
		factor = 1
	}
	fail_if = {
		is_bankrupt = yes
	}
	task_requirements = {
		NOT = { num_of_loans = 1 }
		hidden_trigger = {
			is_bankrupt = no
		}
	}
    task_completed_effect = {
		add_prestige = 5
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 10
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#######################################################################

estate_merchants_restore_currency = {
	can_select = {
		inflation = 10
		NOT = {
			inflation = 30
		}
		NOT = { has_country_modifier = boom_economy }
	}
	selection_weight = {
		factor = 2.5
		modifier = {
			factor = 2.5
			inflation = 15
		}
	}
	fail_if = {
		inflation = 35
	}
	task_requirements = {
		NOT = { inflation = 5 }
	}
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_country_modifier = {
			name = boom_economy
			duration = 5475
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_slavers_restore_currency = {
	can_select = {
		inflation = 10
		NOT = {
			inflation = 30
		}
		NOT = { has_country_modifier = boom_economy }
	}
	selection_weight = {
		factor = 2.5
		modifier = {
			factor = 2.5
			inflation = 15
		}
	}
	fail_if = {
		inflation = 35
	}
	task_requirements = {
		NOT = { inflation = 5 }
	}
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
		add_country_modifier = {
			name = boom_economy
			duration = 5475
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_commoners_restore_currency = {
	can_select = {
		inflation = 10
		NOT = {
			inflation = 30
		}
		NOT = { has_country_modifier = boom_economy }
	}
	selection_weight = {
		factor = 2.5
		modifier = {
			factor = 2.5
			inflation = 15
		}
	}
	fail_if = {
		inflation = 35
	}
	task_requirements = {
		NOT = { inflation = 5 }
	}
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 10
		}
		add_country_modifier = {
			name = boom_economy
			duration = 5475
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#######################################################################

estate_merchants_recovery_from_hyperinflation = {
	can_select = {
		inflation = 30
	}
	selection_weight = {
		factor = 5
	}
	task_requirements = {
		NOT = { inflation = 15 }
	}
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_stability_or_adm_power = yes
		add_inflation = -10
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_slavers_recovery_from_hyperinflation = {
	can_select = {
		inflation = 30
	}
	selection_weight = {
		factor = 5
	}
	task_requirements = {
		NOT = { inflation = 15 }
	}
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
		add_stability_or_adm_power = yes
		add_inflation = -10
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_commoners_recovery_from_hyperinflation = {
	can_select = {
		inflation = 30
	}
	selection_weight = {
		factor = 5
	}
	task_requirements = {
		NOT = { inflation = 15 }
	}
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 10
		}
		add_stability_or_adm_power = yes
		add_inflation = -10
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#######################################################################

estate_merchants_increase_trade_power_in_X = {
	can_select = {
		any_active_trade_node = {
			trade_share = {
				country = root
				share = 5
			}
			NOT = {
				trade_share = {
					country = root
					share = 50
				}
			}
			any_trade_node_member_province = {
				has_port = yes
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		set_variable = {
			which = estate_merchants_increase_trade_power_in_X_var
			value = 0
		}
		random_active_trade_node = {
			limit = {
				trade_share = {
					country = root
					share = 5
				}
				NOT = {
					trade_share = {
						country = root
						share = 50
					}
				}
				any_trade_node_member_province = {
					has_port = yes
				}
			}
			save_event_target_as = agenda_trade_node
			if = {
				limit = {
					trade_share = { #Requires 65
						country = root
						share = 40
					}
				}
				root = {
					set_variable = {
						which = estate_merchants_increase_trade_power_in_X_var
						value = 7
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 50
						country = root
						share = 30
					}
				}
				root = {
					set_variable = {
						which = estate_merchants_increase_trade_power_in_X_var
						value = 6
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 40
						country = root
						share = 23
					}
				}
				root = {
					set_variable = {
						which = estate_merchants_increase_trade_power_in_X_var
						value = 5
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 30
						country = root
						share = 15
					}
				}
				root = {
					set_variable = {
						which = estate_merchants_increase_trade_power_in_X_var
						value = 4
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 25
						country = root
						share = 10
					}
				}
				root = {
					set_variable = {
						which = estate_merchants_increase_trade_power_in_X_var
						value = 3
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 20
						country = root
						share = 7
					}
				}
				root = {
					set_variable = {
						which = estate_merchants_increase_trade_power_in_X_var
						value = 2
					}
				}
			}
			else = { #Requires 15
				root = {
					set_variable = {
						which = estate_merchants_increase_trade_power_in_X_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_trade_node
	}
	task_requirements = {
		event_target:agenda_trade_node = {
			if = {
				limit = {
					root = {
						check_variable = {
							which = estate_merchants_increase_trade_power_in_X_var
							value = 7
						}
					}
				}
				trade_share = {
					country = root
					share = 65
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_merchants_increase_trade_power_in_X_var
							value = 6
						}
					}
				}
				trade_share = {
					country = root
					share = 50
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_merchants_increase_trade_power_in_X_var
							value = 5
						}
					}
				}
				trade_share = {
					country = root
					share = 40
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_merchants_increase_trade_power_in_X_var
							value = 4
						}
					}
				}
				trade_share = {
					country = root
					share = 30
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_merchants_increase_trade_power_in_X_var
							value = 3
						}
					}
				}
				trade_share = {
					country = root
					share = 25
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_merchants_increase_trade_power_in_X_var
							value = 2
						}
					}
				}
				trade_share = {
					country = root
					share = 20
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_merchants_increase_trade_power_in_X_var
							value = 1
						}
					}
				}
				trade_share = {
					country = root
					share = 15
				}
			}
		}
	}
	task_completed_effect = {
		add_years_of_income = 1.5
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_slavers_increase_trade_power_in_X = {
	can_select = {
		any_active_trade_node = {
			trade_share = {
				country = root
				share = 5
			}
			NOT = {
				trade_share = {
					country = root
					share = 50
				}
			}
			any_trade_node_member_province = {
				has_port = yes
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		set_variable = {
			which = estate_slavers_increase_trade_power_in_X_var
			value = 0
		}
		random_active_trade_node = {
			limit = {
				trade_share = {
					country = root
					share = 5
				}
				NOT = {
					trade_share = {
						country = root
						share = 50
					}
				}
				any_trade_node_member_province = {
					has_port = yes
				}
			}
			save_event_target_as = agenda_trade_node
			if = {
				limit = {
					trade_share = { #Requires 65
						country = root
						share = 40
					}
				}
				root = {
					set_variable = {
						which = estate_slavers_increase_trade_power_in_X_var
						value = 7
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 50
						country = root
						share = 30
					}
				}
				root = {
					set_variable = {
						which = estate_slavers_increase_trade_power_in_X_var
						value = 6
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 40
						country = root
						share = 23
					}
				}
				root = {
					set_variable = {
						which = estate_slavers_increase_trade_power_in_X_var
						value = 5
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 30
						country = root
						share = 15
					}
				}
				root = {
					set_variable = {
						which = estate_slavers_increase_trade_power_in_X_var
						value = 4
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 25
						country = root
						share = 10
					}
				}
				root = {
					set_variable = {
						which = estate_slavers_increase_trade_power_in_X_var
						value = 3
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 20
						country = root
						share = 7
					}
				}
				root = {
					set_variable = {
						which = estate_slavers_increase_trade_power_in_X_var
						value = 2
					}
				}
			}
			else = { #Requires 15
				root = {
					set_variable = {
						which = estate_slavers_increase_trade_power_in_X_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_trade_node
	}
	task_requirements = {
		event_target:agenda_trade_node = {
			if = {
				limit = {
					root = {
						check_variable = {
							which = estate_slavers_increase_trade_power_in_X_var
							value = 7
						}
					}
				}
				trade_share = {
					country = root
					share = 65
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_slavers_increase_trade_power_in_X_var
							value = 6
						}
					}
				}
				trade_share = {
					country = root
					share = 50
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_slavers_increase_trade_power_in_X_var
							value = 5
						}
					}
				}
				trade_share = {
					country = root
					share = 40
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_slavers_increase_trade_power_in_X_var
							value = 4
						}
					}
				}
				trade_share = {
					country = root
					share = 30
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_slavers_increase_trade_power_in_X_var
							value = 3
						}
					}
				}
				trade_share = {
					country = root
					share = 25
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_slavers_increase_trade_power_in_X_var
							value = 2
						}
					}
				}
				trade_share = {
					country = root
					share = 20
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_slavers_increase_trade_power_in_X_var
							value = 1
						}
					}
				}
				trade_share = {
					country = root
					share = 15
				}
			}
		}
	}
	task_completed_effect = {
		add_years_of_income = 1.5
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_commoners_increase_trade_power_in_X = {
	can_select = {
		any_active_trade_node = {
			trade_share = {
				country = root
				share = 5
			}
			NOT = {
				trade_share = {
					country = root
					share = 50
				}
			}
			any_trade_node_member_province = {
				has_port = yes
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		set_variable = {
			which = estate_commoners_increase_trade_power_in_X_var
			value = 0
		}
		random_active_trade_node = {
			limit = {
				trade_share = {
					country = root
					share = 5
				}
				NOT = {
					trade_share = {
						country = root
						share = 50
					}
				}
				any_trade_node_member_province = {
					has_port = yes
				}
			}
			save_event_target_as = agenda_trade_node
			if = {
				limit = {
					trade_share = { #Requires 65
						country = root
						share = 40
					}
				}
				root = {
					set_variable = {
						which = estate_commoners_increase_trade_power_in_X_var
						value = 7
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 50
						country = root
						share = 30
					}
				}
				root = {
					set_variable = {
						which = estate_commoners_increase_trade_power_in_X_var
						value = 6
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 40
						country = root
						share = 23
					}
				}
				root = {
					set_variable = {
						which = estate_commoners_increase_trade_power_in_X_var
						value = 5
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 30
						country = root
						share = 15
					}
				}
				root = {
					set_variable = {
						which = estate_commoners_increase_trade_power_in_X_var
						value = 4
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 25
						country = root
						share = 10
					}
				}
				root = {
					set_variable = {
						which = estate_commoners_increase_trade_power_in_X_var
						value = 3
					}
				}
			}
			else_if = {
				limit = {
					trade_share = { #Requires 20
						country = root
						share = 7
					}
				}
				root = {
					set_variable = {
						which = estate_commoners_increase_trade_power_in_X_var
						value = 2
					}
				}
			}
			else = { #Requires 15
				root = {
					set_variable = {
						which = estate_commoners_increase_trade_power_in_X_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_trade_node
	}
	task_requirements = {
		event_target:agenda_trade_node = {
			if = {
				limit = {
					root = {
						check_variable = {
							which = estate_commoners_increase_trade_power_in_X_var
							value = 7
						}
					}
				}
				trade_share = {
					country = root
					share = 65
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_commoners_increase_trade_power_in_X_var
							value = 6
						}
					}
				}
				trade_share = {
					country = root
					share = 50
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_commoners_increase_trade_power_in_X_var
							value = 5
						}
					}
				}
				trade_share = {
					country = root
					share = 40
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_commoners_increase_trade_power_in_X_var
							value = 4
						}
					}
				}
				trade_share = {
					country = root
					share = 30
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_commoners_increase_trade_power_in_X_var
							value = 3
						}
					}
				}
				trade_share = {
					country = root
					share = 25
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_commoners_increase_trade_power_in_X_var
							value = 2
						}
					}
				}
				trade_share = {
					country = root
					share = 20
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = estate_commoners_increase_trade_power_in_X_var
							value = 1
						}
					}
				}
				trade_share = {
					country = root
					share = 15
				}
			}
		}
	}
	task_completed_effect = {
		add_years_of_income = 1.5
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 10
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#######################################################################

estate_merchants_access_sea = {
	can_select = {
		is_free_or_tributary_trigger = yes
		NOT = {
			any_owned_province = {
				has_port = yes
			}
		}
		any_owned_province = {
			any_neighbor_province = {
				has_port = yes
				owner = {
					NOT = { overlord_of = root }
					NOT = { is_subject_of = root }
					NOT = { alliance_with = root }
					NOT = { ROOT = { truce_with = prev } }
					NOT = {
						has_opinion = {
							who = root
							value = 50
						}
					}
				}
			}
		}
	}
	selection_weight = {
		factor = 2.5
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				any_neighbor_province = {
					has_port = yes
					owner = {
						NOT = { overlord_of = root }
						NOT = { is_subject_of = root }
						NOT = { alliance_with = root }
						NOT = { ROOT = { truce_with = prev } }
						NOT = {
							has_opinion = {
								who = root
								value = 50
							}
						}
					}
				}
			}
			random_neighbor_province = {
				limit = {
					has_port = yes
					owner = {
						NOT = { overlord_of = root }
						NOT = { is_subject_of = root }
						NOT = { alliance_with = root }
						NOT = { ROOT = { truce_with = prev } }
						NOT = {
							has_opinion = {
								who = root
								value = 50
							}
						}
					}
				}
				save_event_target_as = agenda_province
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	task_requirements = {
		any_owned_province = {
			has_port = yes
		}
	}
	immediate_effect = {
		if = {
			limit = {
				event_target:agenda_province = {
					NOT = { is_core = root }
					NOT = { is_claim = root }
				}
			}
			event_target:agenda_province = {
				add_claim = root
			}
		}
	}
	on_invalid = {
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_sailors = 5000
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
		event_target:agenda_province = {
			if = {
				limit = {
					is_claim = root
					NOT = { is_permanent_claim = root }
				}
				remove_claim = root
			}
		}
    }
}

estate_slavers_access_sea = {
	can_select = {
		is_free_or_tributary_trigger = yes
		NOT = {
			any_owned_province = {
				has_port = yes
			}
		}
		any_owned_province = {
			any_neighbor_province = {
				has_port = yes
				owner = {
					NOT = { overlord_of = root }
					NOT = { is_subject_of = root }
					NOT = { alliance_with = root }
					NOT = { ROOT = { truce_with = prev } }
					NOT = {
						has_opinion = {
							who = root
							value = 50
						}
					}
				}
			}
		}
	}
	selection_weight = {
		factor = 2.5
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				any_neighbor_province = {
					has_port = yes
					owner = {
						NOT = { overlord_of = root }
						NOT = { is_subject_of = root }
						NOT = { alliance_with = root }
						NOT = { ROOT = { truce_with = prev } }
						NOT = {
							has_opinion = {
								who = root
								value = 50
							}
						}
					}
				}
			}
			random_neighbor_province = {
				limit = {
					has_port = yes
					owner = {
						NOT = { overlord_of = root }
						NOT = { is_subject_of = root }
						NOT = { alliance_with = root }
						NOT = { ROOT = { truce_with = prev } }
						NOT = {
							has_opinion = {
								who = root
								value = 50
							}
						}
					}
				}
				save_event_target_as = agenda_province
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	task_requirements = {
		any_owned_province = {
			has_port = yes
		}
	}
	immediate_effect = {
		if = {
			limit = {
				event_target:agenda_province = {
					NOT = { is_core = root }
					NOT = { is_claim = root }
				}
			}
			event_target:agenda_province = {
				add_claim = root
			}
		}
	}
	on_invalid = {
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
		add_sailors = 5000
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
		event_target:agenda_province = {
			if = {
				limit = {
					is_claim = root
					NOT = { is_permanent_claim = root }
				}
				remove_claim = root
			}
		}
    }
}

#######################################################################

estate_merchants_build_a_fleet = {
	can_select = {
		primitives = no
		any_owned_province = {
			has_port = yes
			is_core = root
		}
		navy_size = 1
		NOT = { navy_size_percentage = 0.5 }
		NOT = { navy_size = 250 }
		NOT = { has_country_modifier = thriving_ship_building_sector }
	}
	selection_weight = {
		factor = 1.0
	}
	task_requirements = {
		navy_size_percentage = 0.75
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		create_admiral = {
			tradition = 40
		}
	}
	fail_if = {
		NOT = {
			any_owned_province = {
				has_port = yes
			}
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_slavers_build_a_fleet = {
	can_select = {
		primitives = no
		any_owned_province = {
			has_port = yes
			is_core = root
		}
		navy_size = 1
		NOT = { navy_size_percentage = 0.5 }
		NOT = { navy_size = 250 }
		NOT = { has_country_modifier = thriving_ship_building_sector }
	}
	selection_weight = {
		factor = 1.0
	}
	task_requirements = {
		navy_size_percentage = 0.75
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
		create_admiral = {
			tradition = 40
		}
	}
	fail_if = {
		NOT = {
			any_owned_province = {
				has_port = yes
			}
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#######################################################################

estate_merchants_bigger_fleet_than_rival = {
	can_select = {
		primitives = no
		any_owned_province = {
			has_port = yes
			is_core = root
		}
		NOT = { navy_size_percentage = 1 }
		any_rival_country = {
			NOT = { war_with = root }
			NOT = { root = { navy_size = prev } }
			navy_balance = {
				who = root
				value = 1.05
			}
			NOT = {
				navy_balance = {
					who = root
					value = 1.25
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_rival_country = {
			limit = {
				NOT = { war_with = root }
				NOT = { root = { navy_size = prev } }
				navy_balance = {
					who = root
					value = 1.05
				}
				NOT = {
					navy_balance = {
						who = root
						value = 1.25
					}
				}
			}
			save_event_target_as = agenda_country
		}
	}
	provinces_to_highlight = {
		is_capital_of = event_target:agenda_country
	}
	task_requirements = {
		if = {
			limit = { event_target:agenda_country = { num_of_cities = 1 } }
			navy_size = event_target:agenda_country
		}
		else = {
			always = yes
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_country_modifier = {
			name = naval_enthusiasm_mission
			duration = 3650
		}
	}
	fail_if = {
		NOT = {
			any_owned_province = {
				has_port = yes
			}
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_slavers_bigger_fleet_than_rival = {
	can_select = {
		primitives = no
		any_owned_province = {
			has_port = yes
			is_core = root
		}
		NOT = { navy_size_percentage = 1 }
		any_rival_country = {
			NOT = { war_with = root }
			NOT = { root = { navy_size = prev } }
			navy_balance = {
				who = root
				value = 1.05
			}
			NOT = {
				navy_balance = {
					who = root
					value = 1.25
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_rival_country = {
			limit = {
				NOT = { war_with = root }
				NOT = { root = { navy_size = prev } }
				navy_balance = {
					who = root
					value = 1.05
				}
				NOT = {
					navy_balance = {
						who = root
						value = 1.25
					}
				}
			}
			save_event_target_as = agenda_country
		}
	}
	provinces_to_highlight = {
		is_capital_of = event_target:agenda_country
	}
	task_requirements = {
		if = {
			limit = { event_target:agenda_country = { num_of_cities = 1 } }
			navy_size = event_target:agenda_country
		}
		else = {
			always = yes
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
		add_country_modifier = {
			name = naval_enthusiasm_mission
			duration = 3650
		}
	}
	fail_if = {
		NOT = {
			any_owned_province = {
				has_port = yes
			}
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#######################################################################

estate_mages_improve_dip_rep = {
	can_select = {
		NOT = { diplomatic_reputation = -2 }
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		diplomatic_reputation = 1
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 10
		}
		add_prestige = 10
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_mages
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_merchants_improve_dip_rep = {
	can_select = {
		NOT = { diplomatic_reputation = -2 }
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		diplomatic_reputation = 1
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_prestige = 10
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_commoners_improve_dip_rep = {
	can_select = {
		NOT = { diplomatic_reputation = -2 }
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		diplomatic_reputation = 1
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 10
		}
		add_prestige = 10
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_nobility_improve_dip_rep = {
	can_select = {
		NOT = { diplomatic_reputation = -2 }
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		diplomatic_reputation = 1
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_nobility
			loyalty = 10
		}
		add_prestige = 10
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_nobility
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#######################################################################

estate_merchants_get_cash = {
	can_select = {
		NOT = { years_of_income = 0.5 }
		NOT = { num_of_loans = 1 }
		is_at_war = no
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		years_of_income = 2.5
		NOT = { num_of_loans = 1 }
	}
	fail_if = {
		num_of_loans = 1
	}
	task_completed_effect = {
		add_dip_power = 50
		if = {
			limit = {
				inflation = 5
			}
			add_estate_loyalty = {
				estate = estate_merchants
				loyalty = 5
			}
		}
		else = {
			add_estate_loyalty = {
				estate = estate_merchants
				loyalty = 15
			}
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_slavers_get_cash = {
	can_select = {
		NOT = { years_of_income = 0.5 }
		NOT = { num_of_loans = 1 }
		is_at_war = no
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		years_of_income = 2.5
		NOT = { num_of_loans = 1 }
	}
	fail_if = {
		num_of_loans = 1
	}
	task_completed_effect = {
		add_dip_power = 50
		if = {
			limit = {
				inflation = 5
			}
			add_estate_loyalty = {
				estate = estate_slavers
				loyalty = 5
			}
		}
		else = {
			add_estate_loyalty = {
				estate = estate_slavers
				loyalty = 15
			}
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_commoners_get_cash = {
	can_select = {
		NOT = { years_of_income = 0.5 }
		NOT = { num_of_loans = 1 }
		is_at_war = no
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		years_of_income = 2.5
		NOT = { num_of_loans = 1 }
	}
	fail_if = {
		num_of_loans = 1
	}
	task_completed_effect = {
		add_dip_power = 50
		if = {
			limit = {
				inflation = 5
			}
			add_estate_loyalty = {
				estate = estate_commoners
				loyalty = 5
			}
		}
		else = {
			add_estate_loyalty = {
				estate = estate_commoners
				loyalty = 15
			}
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#######################################################################

estate_merchants_reduce_corruption = {
	can_select = {
		corruption = 5
		is_bankrupt = no
		NOT = { has_country_modifier = freedom_from_corruption }
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		set_variable = {
			which = estate_merchants_reduce_corruption_var
			value = 0
		}
		if = {
			limit = {
				NOT = {
					corruption = 10
				}
			}
			set_variable = {
				which = estate_merchants_reduce_corruption_var
				value = 1
			}
		}
		else_if = {
			limit = {
				NOT = {
					corruption = 15
				}
			}
			set_variable = {
				which = estate_merchants_reduce_corruption_var
				value = 2
			}
		}
		else = {
			set_variable = {
				which = estate_merchants_reduce_corruption_var
				value = 3
			}
		}
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_merchants_reduce_corruption_var
					value = 3
				}
			}
			NOT = { corruption = 10 }
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_merchants_reduce_corruption_var
					value = 2
				}
			}
			NOT = { corruption = 5 }
		}
		else = {
			NOT = { corruption = 1 }
		}
	}
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_country_modifier = {
			name = freedom_from_corruption
			duration = 5475
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_commoners_reduce_corruption = {
	can_select = {
		corruption = 5
		is_bankrupt = no
		NOT = { has_country_modifier = freedom_from_corruption }
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		set_variable = {
			which = estate_commoners_reduce_corruption_var
			value = 0
		}
		if = {
			limit = {
				NOT = {
					corruption = 10
				}
			}
			set_variable = {
				which = estate_commoners_reduce_corruption_var
				value = 1
			}
		}
		else_if = {
			limit = {
				NOT = {
					corruption = 15
				}
			}
			set_variable = {
				which = estate_commoners_reduce_corruption_var
				value = 2
			}
		}
		else = {
			set_variable = {
				which = estate_commoners_reduce_corruption_var
				value = 3
			}
		}
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_commoners_reduce_corruption_var
					value = 3
				}
			}
			NOT = { corruption = 10 }
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_commoners_reduce_corruption_var
					value = 2
				}
			}
			NOT = { corruption = 5 }
		}
		else = {
			NOT = { corruption = 1 }
		}
	}
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 10
		}
		add_country_modifier = {
			name = freedom_from_corruption
			duration = 5475
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#######################################################################

estate_merchants_protect_against_piracy = {
	can_select = {
		any_active_trade_node = {
			trade_share = {
				country = root
				share = 20
			}
			privateer_power = {
				share = 20
			}
			NOT = {
				privateer_power = {
					share = 1
					country = root
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_active_trade_node = {
			limit = {
				trade_share = {
					country = root
					share = 20
				}
				privateer_power = {
					share = 20
				}
				NOT = {
					privateer_power = {
						share = 1
						country = root
					}
				}
			}
			save_event_target_as = agenda_trade_node
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_trade_node
	}
	task_requirements = {
		event_target:agenda_trade_node = {
			trade_share = {
				country = root
				share = 20
			}
			NOT = {
				privateer_power = {
					share = 5
				}
			}
		}
	}
	fail_if = {
		event_target:agenda_trade_node = {
			NOT = {
				trade_share = {
					country = root
					share = 10
				}
			}
		}
	}
    task_completed_effect = {
		add_dip_power = 50
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 15
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_commoners_protect_against_piracy = {
	can_select = {
		any_active_trade_node = {
			trade_share = {
				country = root
				share = 20
			}
			privateer_power = {
				share = 20
			}
			NOT = {
				privateer_power = {
					share = 1
					country = root
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_active_trade_node = {
			limit = {
				trade_share = {
					country = root
					share = 20
				}
				privateer_power = {
					share = 20
				}
				NOT = {
					privateer_power = {
						share = 1
						country = root
					}
				}
			}
			save_event_target_as = agenda_trade_node
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_trade_node
	}
	task_requirements = {
		event_target:agenda_trade_node = {
			trade_share = {
				country = root
				share = 20
			}
			NOT = {
				privateer_power = {
					share = 5
				}
			}
		}
	}
	fail_if = {
		event_target:agenda_trade_node = {
			NOT = {
				trade_share = {
					country = root
					share = 10
				}
			}
		}
	}
    task_completed_effect = {
		add_dip_power = 50
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 15
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#######################################################################

estate_slavers_go_privateering = {
	can_select = {
		any_owned_province = {
			has_port = yes
		}
		NOT = { num_ships_privateering = 1 }
		NOT = { navy_size = 30 }
		navy_size = 1
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		num_ships_privateering = 10
	}
	task_completed_effect = {
		add_years_of_income = 1.25
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
	}
	fail_if = {
		NOT = {
			any_owned_province = {
				has_port = yes
			}
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_warriors_go_privateering = {
	can_select = {
		any_owned_province = {
			has_port = yes
		}
		NOT = { num_ships_privateering = 1 }
		NOT = { navy_size = 30 }
		navy_size = 1
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		num_ships_privateering = 10
	}
	task_completed_effect = {
		add_years_of_income = 1.25
		add_estate_loyalty = {
			estate = estate_warriors
			loyalty = 10
		}
	}
	fail_if = {
		NOT = {
			any_owned_province = {
				has_port = yes
			}
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_warriors
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}