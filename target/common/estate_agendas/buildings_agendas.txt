estate_priests_build_temple = {
	can_select = {
		adm_tech = 0
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = cathedral }
			NOT = { has_building = temple }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
			NOT = { has_building = cathedral }
			NOT = { has_building = temple }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = temple
				has_building = cathedral
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_priests
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_priests
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_priests
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_priests }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_priests
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

#######################################################################

estate_mages_build_college = {
	can_select = {
		adm_tech = 50
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = college }
			NOT = { has_building = university }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
			NOT = { has_building = college }
			NOT = { has_building = university }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = university
				has_building = college
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_mages
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_mages }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_mages
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

#######################################################################

estate_merchants_build_dock = {
	can_select = {
		dip_tech = 60
		any_owned_province = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = dock }
			NOT = { has_building = drydock }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = dock }
			NOT = { has_building = drydock }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = drydock
				has_building = dock
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_merchants
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_merchants
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_merchants }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_merchants_build_shipyard = {
	can_select = {
		dip_tech = 30
		any_owned_province = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = shipyard }
			NOT = { has_building = grand_shipyard }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = shipyard }
			NOT = { has_building = grand_shipyard }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = grand_shipyard
				has_building = shipyard
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_merchants
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_merchants
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_merchants }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_merchants_build_coastal_defence = {
	can_select = {
		dip_tech = 40
		any_owned_province = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = coastal_defence }
			NOT = { has_building = naval_battery }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = coastal_defence }
			NOT = { has_building = naval_battery }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = naval_battery
				has_building = coastal_defence
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_merchants
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_merchants
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_merchants }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_merchants_build_canal = {
	can_select = {
		adm_tech = 110
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = canal }
			OR = {
				has_port = yes
				any_neighbor_province = {
					has_building = canal
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = canal }
			OR = {
				has_port = yes
				any_neighbor_province = {
					has_building = canal
				}
			}
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_building = canal
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_merchants
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_merchants
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_merchants }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_merchants_build_road_network = {
	can_select = {
		adm_tech = 10
		any_owned_province = {
			num_free_building_slots = 1
			OR = {
				is_capital = yes
				province_has_center_of_trade_of_level = 2
				province_has_center_of_trade_of_level = 3
				any_neighbor_province = {
					has_building = road_network
				}
			}
			NOT = { has_building = road_network }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			OR = {
				is_capital = yes
				province_has_center_of_trade_of_level = 2
				province_has_center_of_trade_of_level = 3
				any_neighbor_province = {
					has_building = road_network
				}
			}
			NOT = { has_building = road_network }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_building = road_network
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_merchants
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_merchants
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_merchants }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_merchants_build_grain_depot = {
	can_select = {
		dip_tech = 30
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = grain_depot }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = grain_depot }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_building = grain_depot
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_merchants
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_merchants
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_merchants }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_merchants_build_courthouse = {
	can_select = {
		adm_tech = 80
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = courthouse }
			NOT = { has_building = town_hall }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = courthouse }
			NOT = { has_building = town_hall }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = town_hall
				has_building = courthouse
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_merchants
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_merchants
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_merchants }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_merchants_build_workshop = {
	can_select = {
		dip_tech = 20
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = workshop }
			NOT = { has_building = counting_house }
			NOT = { has_building = customs_house }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = workshop }
			NOT = { has_building = counting_house }
			NOT = { has_building = customs_house }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = counting_house
				has_building = workshop
				has_building = customs_house
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_merchants
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_merchants
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_merchants }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_merchants_build_marketplace = {
	can_select = {
		dip_tech = 10
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = marketplace }
			NOT = { has_building = trade_depot }
			NOT = { has_building = stock_exchange }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = marketplace }
			NOT = { has_building = trade_depot }
			NOT = { has_building = stock_exchange }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = trade_depot
				has_building = marketplace
				has_building = stock_exchange
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_merchants
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_merchants
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_merchants
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_merchants }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_merchants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

#######################################################################

estate_slavers_build_dock = {
	can_select = {
		dip_tech = 60
		any_owned_province = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = dock }
			NOT = { has_building = drydock }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = dock }
			NOT = { has_building = drydock }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = drydock
				has_building = dock
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_slavers
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_slavers
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_slavers }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_slavers_build_shipyard = {
	can_select = {
		dip_tech = 30
		any_owned_province = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = shipyard }
			NOT = { has_building = grand_shipyard }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = shipyard }
			NOT = { has_building = grand_shipyard }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = grand_shipyard
				has_building = shipyard
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_slavers
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_slavers
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_slavers }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_slavers_build_canal = {
	can_select = {
		adm_tech = 110
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = canal }
			OR = {
				has_port = yes
				any_neighbor_province = {
					has_building = canal
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = canal }
			OR = {
				has_port = yes
				any_neighbor_province = {
					has_building = canal
				}
			}
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_building = canal
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_slavers
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_slavers
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_slavers }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_slavers_build_road_network = {
	can_select = {
		adm_tech = 10
		any_owned_province = {
			num_free_building_slots = 1
			OR = {
				is_capital = yes
				province_has_center_of_trade_of_level = 2
				province_has_center_of_trade_of_level = 3
				any_neighbor_province = {
					has_building = road_network
				}
			}
			NOT = { has_building = road_network }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			OR = {
				is_capital = yes
				province_has_center_of_trade_of_level = 2
				province_has_center_of_trade_of_level = 3
				any_neighbor_province = {
					has_building = road_network
				}
			}
			NOT = { has_building = road_network }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_building = road_network
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_slavers
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_slavers
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_slavers }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_slavers_build_workshop = {
	can_select = {
		dip_tech = 20
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = workshop }
			NOT = { has_building = counting_house }
			NOT = { has_building = customs_house }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = workshop }
			NOT = { has_building = counting_house }
			NOT = { has_building = customs_house }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = counting_house
				has_building = workshop
				has_building = customs_house
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_slavers
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_slavers
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_slavers }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_slavers_build_marketplace = {
	can_select = {
		dip_tech = 10
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = marketplace }
			NOT = { has_building = trade_depot }
			NOT = { has_building = stock_exchange }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = marketplace }
			NOT = { has_building = trade_depot }
			NOT = { has_building = stock_exchange }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = trade_depot
				has_building = marketplace
				has_building = stock_exchange
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_slavers
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_slavers
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_slavers
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_slavers }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_slavers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

#######################################################################

estate_commoners_build_canal = {
	can_select = {
		adm_tech = 110
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = canal }
			OR = {
				has_port = yes
				any_neighbor_province = {
					has_building = canal
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = canal }
			OR = {
				has_port = yes
				any_neighbor_province = {
					has_building = canal
				}
			}
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_building = canal
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_commoners
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_commoners
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_commoners }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_commoners_build_road_network = {
	can_select = {
		adm_tech = 10
		any_owned_province = {
			num_free_building_slots = 1
			OR = {
				is_capital = yes
				province_has_center_of_trade_of_level = 2
				province_has_center_of_trade_of_level = 3
				any_neighbor_province = {
					has_building = road_network
				}
			}
			NOT = { has_building = road_network }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			OR = {
				is_capital = yes
				province_has_center_of_trade_of_level = 2
				province_has_center_of_trade_of_level = 3
				any_neighbor_province = {
					has_building = road_network
				}
			}
			NOT = { has_building = road_network }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_building = road_network
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_commoners
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_commoners
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_commoners }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_commoners_build_grain_depot = {
	can_select = {
		dip_tech = 30
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = grain_depot }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = grain_depot }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_building = grain_depot
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_commoners
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_commoners
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_commoners }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_commoners_build_courthouse = {
	can_select = {
		adm_tech = 80
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = courthouse }
			NOT = { has_building = town_hall }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = courthouse }
			NOT = { has_building = town_hall }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = town_hall
				has_building = courthouse
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_commoners
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_commoners
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_commoners }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_commoners_build_workshop = {
	can_select = {
		dip_tech = 20
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = workshop }
			NOT = { has_building = counting_house }
			NOT = { has_building = customs_house }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = workshop }
			NOT = { has_building = counting_house }
			NOT = { has_building = customs_house }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = counting_house
				has_building = workshop
				has_building = customs_house
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_commoners
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_commoners
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_commoners }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_commoners_build_marketplace = {
	can_select = {
		dip_tech = 10
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = marketplace }
			NOT = { has_building = trade_depot }
			NOT = { has_building = stock_exchange }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = marketplace }
			NOT = { has_building = trade_depot }
			NOT = { has_building = stock_exchange }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = trade_depot
				has_building = marketplace
				has_building = stock_exchange
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_commoners
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_commoners
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_commoners
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_commoners }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_commoners
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

#######################################################################

estate_nobility_build_fort_15th = {
	can_select = {
		mil_tech = 10
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = fort_15th }
			NOT = { has_building = fort_16th }
			NOT = { has_building = fort_17th }
			NOT = { has_building = fort_18th }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = fort_15th }
			NOT = { has_building = fort_16th }
			NOT = { has_building = fort_17th }
			NOT = { has_building = fort_18th }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = fort_16th
				has_building = fort_15th
				has_building = fort_17th
				has_building = fort_18th
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_nobility
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_nobility
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_nobility
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_nobility }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_nobility
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_nobility_build_barracks = {
	can_select = {
		mil_tech = 50
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = barracks }
			NOT = { has_building = training_fields }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = barracks }
			NOT = { has_building = training_fields }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = training_fields
				has_building = barracks
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_nobility
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_nobility
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_nobility
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_nobility }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_nobility
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_nobility_build_regimental_camp = {
	can_select = {
		mil_tech = 60
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = regimental_camp }
			NOT = { has_building = training_fields }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = regimental_camp }
			NOT = { has_building = training_fields }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = training_fields
				has_building = regimental_camp
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_nobility
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_nobility
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_nobility
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_nobility }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_nobility
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_nobility_build_armory = {
	can_select = {
		mil_tech = 70
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = armory }
			NOT = { has_building = arsenal }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = armory }
			NOT = { has_building = arsenal }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = arsenal
				has_building = armory
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_nobility
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_nobility
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_nobility
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_nobility }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_nobility
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_nobility_build_tax_assessor = {
	can_select = {
		adm_tech = 170
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = tax_assessor }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = tax_assessor }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_building = tax_assessor
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_nobility
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_nobility
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_nobility
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_nobility }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_nobility
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

#######################################################################

estate_warriors_build_fort_15th = {
	can_select = {
		mil_tech = 10
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = fort_15th }
			NOT = { has_building = fort_16th }
			NOT = { has_building = fort_17th }
			NOT = { has_building = fort_18th }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = fort_15th }
			NOT = { has_building = fort_16th }
			NOT = { has_building = fort_17th }
			NOT = { has_building = fort_18th }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = fort_16th
				has_building = fort_15th
				has_building = fort_17th
				has_building = fort_18th
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_warriors
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_warriors
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_warriors
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_warriors }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_warriors
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_warriors_build_barracks = {
	can_select = {
		mil_tech = 50
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = barracks }
			NOT = { has_building = training_fields }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = barracks }
			NOT = { has_building = training_fields }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = training_fields
				has_building = barracks
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_warriors
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_warriors
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_warriors
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_warriors }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_warriors
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_warriors_build_regimental_camp = {
	can_select = {
		mil_tech = 60
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = regimental_camp }
			NOT = { has_building = training_fields }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = regimental_camp }
			NOT = { has_building = training_fields }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = training_fields
				has_building = regimental_camp
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_warriors
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_warriors
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_warriors
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_warriors }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_warriors
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_warriors_build_armory = {
	can_select = {
		mil_tech = 70
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = armory }
			NOT = { has_building = arsenal }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = armory }
			NOT = { has_building = arsenal }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = arsenal
				has_building = armory
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_warriors
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_warriors
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_warriors
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_warriors }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_warriors
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_warriors_build_tax_assessor = {
	can_select = {
		adm_tech = 170
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = tax_assessor }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			has_port = yes
			NOT = { has_building = tax_assessor }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_building = tax_assessor
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_warriors
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_warriors
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_warriors
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_warriors }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_warriors
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

#######################################################################

estate_dark_brotherhood_build_fort_15th = {
	can_select = {
		mil_tech = 10
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = fort_15th }
			NOT = { has_building = fort_16th }
			NOT = { has_building = fort_17th }
			NOT = { has_building = fort_18th }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = fort_15th }
			NOT = { has_building = fort_16th }
			NOT = { has_building = fort_17th }
			NOT = { has_building = fort_18th }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = fort_16th
				has_building = fort_15th
				has_building = fort_17th
				has_building = fort_18th
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_dark_brotherhood
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_dark_brotherhood
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_dark_brotherhood
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_dark_brotherhood }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_dark_brotherhood
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_dark_brotherhood_build_barracks = {
	can_select = {
		mil_tech = 50
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = barracks }
			NOT = { has_building = training_fields }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = barracks }
			NOT = { has_building = training_fields }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = training_fields
				has_building = barracks
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_dark_brotherhood
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_dark_brotherhood
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_dark_brotherhood
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_dark_brotherhood }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_dark_brotherhood
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_dark_brotherhood_build_regimental_camp = {
	can_select = {
		mil_tech = 60
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = regimental_camp }
			NOT = { has_building = training_fields }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = regimental_camp }
			NOT = { has_building = training_fields }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = training_fields
				has_building = regimental_camp
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_dark_brotherhood
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_dark_brotherhood
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_dark_brotherhood
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_dark_brotherhood }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_dark_brotherhood
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_dark_brotherhood_build_armory = {
	can_select = {
		mil_tech = 70
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = armory }
			NOT = { has_building = arsenal }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = armory }
			NOT = { has_building = arsenal }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = arsenal
				has_building = armory
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_dark_brotherhood
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_dark_brotherhood
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_dark_brotherhood
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_dark_brotherhood }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_dark_brotherhood
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

#######################################################################

estate_assassins_build_fort_15th = {
	can_select = {
		mil_tech = 10
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = fort_15th }
			NOT = { has_building = fort_16th }
			NOT = { has_building = fort_17th }
			NOT = { has_building = fort_18th }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = fort_15th }
			NOT = { has_building = fort_16th }
			NOT = { has_building = fort_17th }
			NOT = { has_building = fort_18th }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = fort_16th
				has_building = fort_15th
				has_building = fort_17th
				has_building = fort_18th
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_assassins
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_assassins
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_assassins
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_assassins }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_assassins
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_assassins_build_barracks = {
	can_select = {
		mil_tech = 50
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = barracks }
			NOT = { has_building = training_fields }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = barracks }
			NOT = { has_building = training_fields }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = training_fields
				has_building = barracks
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_assassins
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_assassins
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_assassins
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_assassins }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_assassins
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_assassins_build_regimental_camp = {
	can_select = {
		mil_tech = 60
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = regimental_camp }
			NOT = { has_building = training_fields }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = regimental_camp }
			NOT = { has_building = training_fields }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = training_fields
				has_building = regimental_camp
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_assassins
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_assassins
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_assassins
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_assassins }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_assassins
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_assassins_build_armory = {
	can_select = {
		mil_tech = 70
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = armory }
			NOT = { has_building = arsenal }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = armory }
			NOT = { has_building = arsenal }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = arsenal
				has_building = armory
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_assassins
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_assassins
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_assassins
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_assassins }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_assassins
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

#######################################################################

estate_morag_tong_build_fort_15th = {
	can_select = {
		mil_tech = 10
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = fort_15th }
			NOT = { has_building = fort_16th }
			NOT = { has_building = fort_17th }
			NOT = { has_building = fort_18th }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = fort_15th }
			NOT = { has_building = fort_16th }
			NOT = { has_building = fort_17th }
			NOT = { has_building = fort_18th }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = fort_16th
				has_building = fort_15th
				has_building = fort_17th
				has_building = fort_18th
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_morag_tong
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_morag_tong
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_morag_tong
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_morag_tong }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_morag_tong
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_morag_tong_build_barracks = {
	can_select = {
		mil_tech = 50
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = barracks }
			NOT = { has_building = training_fields }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = barracks }
			NOT = { has_building = training_fields }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = training_fields
				has_building = barracks
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_morag_tong
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_morag_tong
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_morag_tong
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_morag_tong }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_morag_tong
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_morag_tong_build_regimental_camp = {
	can_select = {
		mil_tech = 60
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = regimental_camp }
			NOT = { has_building = training_fields }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = regimental_camp }
			NOT = { has_building = training_fields }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = training_fields
				has_building = regimental_camp
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_morag_tong
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_morag_tong
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_morag_tong
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_morag_tong }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_morag_tong
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}

estate_morag_tong_build_armory = {
	can_select = {
		mil_tech = 70
		any_owned_province = {
			num_free_building_slots = 1
			NOT = { has_building = armory }
			NOT = { has_building = arsenal }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
			num_free_building_slots = 1
			NOT = { has_building = armory }
			NOT = { has_building = arsenal }
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			OR = {
				has_building = arsenal
				has_building = armory
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_morag_tong
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_morag_tong
			influence = 5
			duration = 7300
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_morag_tong
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_morag_tong }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
    }
    failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_morag_tong
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
		}
    }
}